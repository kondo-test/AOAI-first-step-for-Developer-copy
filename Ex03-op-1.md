# 演習 3.オプション : Web の情報を検索する

演習で作成しているボット アプリケーションの知識の拡張として、Web の情報を検索する機能を追加します。

この演習では、ボットがユーザーの質問に答えるために Web 検索を使用する方法を学びます。

アプリケーションの処理の流れとしては、RAG のデータソースに情報がなく、関数呼び出し(Function Call) にも該当せず、言語モデルの知識にも情報が無かった場合はに Web 検索を行い、検索結果上位 3 件の Web ページのコンテンツを取得してその内容から回答を生成して返す仕様とします。

```mermaid
graph TD
    A[ユーザー] --> B{RAG に情報があるか}
    B -- はい --> C[RAG の検索結果をもとに言語モデルが回答を生成]
    C --> D[応答]
    B -- いいえ --> E{関数呼び出しの条件に合致するか}
    E -- はい --> F[関数呼び出しを行う]
    F --> G[関数の実行結果をもとに言語モデルが回答を生成]
    G --> H[応答]
    E -- いいえ --> I{言語モデルの知識に情報があるか}
    I -- はい --> J[応答]
    I -- いいえ --> K[Web 検索を行う]
    K --> L[検索結果上位 3 つの Web サイトからコンテンツを取得し言語モデルが回答を生成]
    L --> M[応答]
```